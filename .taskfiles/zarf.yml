version: '3'

tasks:
  create:
    dir: "{{ .ZARF_DIR }}"
    cmds:
      - zarf package create --confirm

  deploy:
    dir: "{{ .ZARF_DIR }}"
    cmds:
      - zarf package deploy --confirm

  publish:
    dir: "{{ .ZARF_DIR }}"
    cmds:
      - zarf package publish *{{ .PROJECT }}*.zst oci://{{ .REPOSITORY }}/{{ .PROJECT }} {{ .PUBLISH_FLAGS }}
